<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemeHub - Tempat Berbagi Meme</title>
    <script src="https://unpkg.com/tailwindcss@^3/dist/tailwind.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        /* Tailwind CSS Backup Styles */
        .bg-gradient-to-br { background: linear-gradient(to bottom right, #faf5ff, #eff6ff); }
        .bg-white { background-color: white; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-green-500 { background-color: #10b981; }
        .bg-red-500 { background-color: #ef4444; }
        .bg-gray-300 { background-color: #d1d5db; }
        .hover\:bg-blue-600:hover { background-color: #2563eb; }
        .hover\:bg-green-600:hover { background-color: #059669; }
        .hover\:bg-red-600:hover { background-color: #dc2626; }
        .hover\:bg-gray-400:hover { background-color: #9ca3af; }
        .text-white { color: white; }
        .text-gray-800 { color: #1f2937; }
        .text-gray-700 { color: #374151; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-400 { color: #9ca3af; }
        .text-blue-500 { color: #3b82f6; }
        .text-red-500 { color: #ef4444; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mr-2 { margin-right: 0.5rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .flex { display: flex; }
        .grid { display: grid; }
        .hidden { display: none; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .space-x-2 > * + * { margin-left: 0.5rem; }
        .space-x-3 > * + * { margin-left: 0.75rem; }
        .space-x-4 > * + * { margin-left: 1rem; }
        .w-full { width: 100%; }
        .max-w-6xl { max-width: 72rem; }
        .max-w-md { max-width: 28rem; }
        .max-w-sm { max-width: 24rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .mx-4 { margin-left: 1rem; margin-right: 1rem; }
        .min-h-screen { min-height: 100vh; }
        .sticky { position: sticky; }
        .fixed { position: fixed; }
        .top-0 { top: 0; }
        .top-4 { top: 1rem; }
        .right-4 { right: 1rem; }
        .bottom-4 { bottom: 1rem; }
        .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
        .z-50 { z-index: 50; }
        .cursor-pointer { cursor: pointer; }
        .transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .transition-transform { transition-property: transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .transform { transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)); }
        .translate-x-full { --tw-translate-x: 100%; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .font-bold { font-weight: 700; }
        .font-medium { font-weight: 500; }
        .text-center { text-align: center; }
        .border { border-width: 1px; }
        .border-gray-300 { border-color: #d1d5db; }
        .border-l-4 { border-left-width: 4px; }
        .border-yellow-500 { border-color: #eab308; }
        .focus\:outline-none:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus\:ring-2:focus { --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); }
        .focus\:ring-blue-500:focus { --tw-ring-color: #3b82f6; }
        .focus\:ring-green-500:focus { --tw-ring-color: #10b981; }
        .bg-yellow-100 { background-color: #fef3c7; }
        .text-yellow-800 { color: #92400e; }
        .text-yellow-700 { color: #a16207; }
        .overflow-hidden { overflow: hidden; }
        .h-64 { height: 16rem; }
        .h-2 { height: 0.5rem; }
        .object-cover { object-fit: cover; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .rounded-full { border-radius: 9999px; }
        .duration-300 { transition-duration: 300ms; }
        .flex-1 { flex: 1 1 0%; }
        .bg-black { background-color: black; }
        .bg-opacity-50 { --tw-bg-opacity: 0.5; }
        
        @media (min-width: 768px) {
            .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        @media (min-width: 1024px) {
            .lg\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        }
        
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .gap-6 { gap: 1.5rem; }
        
        .meme-card {
            transition: transform 0.2s ease-in-out;
        }
        .meme-card:hover {
            transform: translateY(-4px);
        }
        .upload-area {
            border: 2px dashed #e5e7eb;
            transition: all 0.3s ease;
        }
        .upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 to-blue-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <div class="text-3xl">üòÇ</div>
                    <h1 class="text-2xl font-bold text-gray-800">MemeHub</h1>
                </div>
                <div id="authSection">
                    <!-- Login/Register buttons will appear here -->
                    <div id="loginButtons" class="space-x-2">
                        <button id="loginBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                            Masuk
                        </button>
                        <button id="registerBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                            Daftar
                        </button>
                    </div>
                    <!-- User info will appear here when logged in -->
                    <div id="userInfo" class="hidden items-center space-x-4">
                        <span id="userName" class="text-gray-700"></span>
                        <button id="logoutBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                            Keluar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Upload Section (only visible when logged in) -->
        <div id="uploadSection" class="hidden mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="mr-2">üì§</span>
                    Upload Meme Baru
                </h2>
                <div id="uploadArea" class="upload-area rounded-lg p-8 text-center cursor-pointer">
                    <div class="text-4xl mb-4">üñºÔ∏è</div>
                    <p class="text-gray-600 mb-2">Klik atau drag & drop gambar meme di sini</p>
                    <p class="text-sm text-gray-400">Format: JPG, PNG, GIF (Max 5MB)</p>
                    <input type="file" id="fileInput" accept="image/*" class="hidden">
                </div>
                <div id="uploadProgress" class="hidden mt-4">
                    <div class="bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <p id="progressText" class="text-sm text-gray-600 mt-2">Mengupload...</p>
                </div>
            </div>
        </div>

        <!-- Memes Grid -->
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <span class="mr-2">üî•</span>
                Meme Terbaru
            </h2>
            <div id="memesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Sample memes will be loaded here -->
                <div class="meme-card bg-white rounded-xl shadow-lg overflow-hidden">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f3f4f6'/%3E%3Ctext x='200' y='140' text-anchor='middle' font-family='Arial' font-size='16' fill='%23666'%3ESample Meme%3C/text%3E%3Ctext x='200' y='160' text-anchor='middle' font-family='Arial' font-size='24' fill='%23333'%3EüòÇ%3C/text%3E%3C/svg%3E" alt="Sample Meme" class="w-full h-64 object-cover">
                    <div class="p-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">Demo User</span>
                            <div class="flex items-center space-x-2">
                                <button class="text-red-500 hover:text-red-600 transition-colors">
                                    ‚ù§Ô∏è <span class="text-sm">42</span>
                                </button>
                                <button class="text-blue-500 hover:text-blue-600 transition-colors">
                                    üí¨ <span class="text-sm">12</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Masuk ke MemeHub</h3>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Email</label>
                    <input type="email" id="loginEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                    <input type="password" id="loginPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg transition-colors">
                        Masuk
                    </button>
                    <button type="button" id="closeLoginModal" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 rounded-lg transition-colors">
                        Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Daftar di MemeHub</h3>
            <form id="registerForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Nama</label>
                    <input type="text" id="registerName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Email</label>
                    <input type="email" id="registerEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                    <input type="password" id="registerPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg transition-colors">
                        Daftar
                    </button>
                    <button type="button" id="closeRegisterModal" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 rounded-lg transition-colors">
                        Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Notice -->
    <div id="successNotice" class="fixed bottom-4 right-4 bg-green-100 border-l-4 border-green-500 p-4 rounded-lg shadow-lg max-w-sm">
        <div class="flex items-start">
            <div class="text-green-500 mr-2">‚úÖ</div>
            <div>
                <p class="text-sm font-medium text-green-800">Firebase Aktif</p>
                <p class="text-xs text-green-700 mt-1">Website terhubung dengan Firebase. Semua fitur sudah berfungsi!</p>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA4zfbfUY_HPI4aY9mFOHLoUm0jeqx-O6c",
            authDomain: "xweb-807da.firebaseapp.com",
            projectId: "xweb-807da",
            storageBucket: "xweb-807da.firebasestorage.app",
            messagingSenderId: "102962437816",
            appId: "1:102962437816:web:cdef50bd5940775dde9e4d"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const storage = firebase.storage();
        const db = firebase.firestore();

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const closeLoginModal = document.getElementById('closeLoginModal');
        const closeRegisterModal = document.getElementById('closeRegisterModal');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const uploadSection = document.getElementById('uploadSection');
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadProgress = document.getElementById('uploadProgress');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const memesGrid = document.getElementById('memesGrid');
        const loginButtons = document.getElementById('loginButtons');
        const userInfo = document.getElementById('userInfo');
        const userName = document.getElementById('userName');

        // Current user state
        let currentUser = null;

        // Event Listeners
        loginBtn.addEventListener('click', () => {
            loginModal.classList.remove('hidden');
        });

        registerBtn.addEventListener('click', () => {
            registerModal.classList.remove('hidden');
        });

        closeLoginModal.addEventListener('click', () => {
            loginModal.classList.add('hidden');
        });

        closeRegisterModal.addEventListener('click', () => {
            registerModal.classList.add('hidden');
        });

        logoutBtn.addEventListener('click', () => {
            logout();
        });

        // Upload area events
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileUpload(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileUpload(e.target.files[0]);
            }
        });

        // Login form
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Firebase login
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    currentUser = userCredential.user;
                    updateUI();
                    loginModal.classList.add('hidden');
                    showNotification('Berhasil masuk!', 'success');
                })
                .catch((error) => {
                    showNotification('Login gagal: ' + error.message, 'error');
                });
        });

        // Register form
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            // Firebase register
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Update profile with display name
                    return userCredential.user.updateProfile({
                        displayName: name
                    });
                })
                .then(() => {
                    currentUser = auth.currentUser;
                    updateUI();
                    registerModal.classList.add('hidden');
                    showNotification('Berhasil mendaftar!', 'success');
                })
                .catch((error) => {
                    showNotification('Registrasi gagal: ' + error.message, 'error');
                });
        });

        // Demo Functions (Replace with actual Firebase functions)
        function demoLogin(email) {
            // Simulate successful login
            currentUser = {
                email: email,
                displayName: email.split('@')[0]
            };
            updateUI();
            loginModal.classList.add('hidden');
            showNotification('Berhasil masuk!', 'success');
        }

        function demoRegister(name, email) {
            // Simulate successful registration
            currentUser = {
                email: email,
                displayName: name
            };
            updateUI();
            registerModal.classList.add('hidden');
            showNotification('Berhasil mendaftar!', 'success');
        }

        function logout() {
            auth.signOut().then(() => {
                currentUser = null;
                updateUI();
                showNotification('Berhasil keluar!', 'info');
            });
        }

        // Firebase auth state listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                updateUI();
            } else {
                currentUser = null;
                updateUI();
            }
        });

        function updateUI() {
            if (currentUser) {
                loginButtons.classList.add('hidden');
                userInfo.classList.remove('hidden');
                userInfo.classList.add('flex');
                userName.textContent = currentUser.displayName || currentUser.email.split('@')[0];
                uploadSection.classList.remove('hidden');
            } else {
                loginButtons.classList.remove('hidden');
                userInfo.classList.add('hidden');
                userInfo.classList.remove('flex');
                uploadSection.classList.add('hidden');
            }
        }

        function handleFileUpload(file) {
            if (!currentUser) {
                showNotification('Silakan login terlebih dahulu!', 'error');
                return;
            }

            // Validate file
            if (!file.type.startsWith('image/')) {
                showNotification('File harus berupa gambar!', 'error');
                return;
            }

            if (file.size > 5 * 1024 * 1024) {
                showNotification('Ukuran file maksimal 5MB!', 'error');
                return;
            }

            // Show progress
            uploadProgress.classList.remove('hidden');
            
            // Create unique filename
            const timestamp = Date.now();
            const filename = `memes/${currentUser.uid}/${timestamp}_${file.name}`;
            
            // Upload to Firebase Storage
            const storageRef = storage.ref(filename);
            const uploadTask = storageRef.put(file);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    // Progress
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    progressBar.style.width = progress + '%';
                    progressText.textContent = `Mengupload... ${Math.round(progress)}%`;
                },
                (error) => {
                    // Error
                    uploadProgress.classList.add('hidden');
                    progressBar.style.width = '0%';
                    showNotification('Upload gagal: ' + error.message, 'error');
                },
                () => {
                    // Success
                    uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                        // Save meme data to Firestore
                        db.collection('memes').add({
                            imageUrl: downloadURL,
                            userId: currentUser.uid,
                            userName: currentUser.displayName || currentUser.email.split('@')[0],
                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                            likes: 0,
                            comments: 0
                        }).then(() => {
                            uploadProgress.classList.add('hidden');
                            progressBar.style.width = '0%';
                            showNotification('Meme berhasil diupload!', 'success');
                            
                            // Reload memes
                            loadMemes();
                        });
                    });
                }
            );
        }

        function addMemeToGrid(file, userName) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const memeCard = document.createElement('div');
                memeCard.className = 'meme-card bg-white rounded-xl shadow-lg overflow-hidden';
                memeCard.innerHTML = `
                    <img src="${e.target.result}" alt="User Meme" class="w-full h-64 object-cover">
                    <div class="p-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">${userName}</span>
                            <div class="flex items-center space-x-2">
                                <button class="text-red-500 hover:text-red-600 transition-colors">
                                    ‚ù§Ô∏è <span class="text-sm">0</span>
                                </button>
                                <button class="text-blue-500 hover:text-blue-600 transition-colors">
                                    üí¨ <span class="text-sm">0</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                // Insert at the beginning
                memesGrid.insertBefore(memeCard, memesGrid.firstChild);
            };
            reader.readAsDataURL(file);
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            };
            
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Slide in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Slide out and remove
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialize UI
        updateUI();

        // Load memes from Firestore
        function loadMemes() {
            // Clear existing memes except the first sample one
            const sampleMeme = memesGrid.firstElementChild;
            memesGrid.innerHTML = '';
            memesGrid.appendChild(sampleMeme);
            
            // Load from Firestore
            db.collection('memes')
                .orderBy('timestamp', 'desc')
                .limit(20)
                .get()
                .then((querySnapshot) => {
                    querySnapshot.forEach((doc) => {
                        const meme = doc.data();
                        const memeCard = createMemeCard(meme, doc.id);
                        memesGrid.appendChild(memeCard);
                    });
                })
                .catch((error) => {
                    console.error('Error loading memes:', error);
                });
        }

        // Create meme card element
        function createMemeCard(meme, memeId) {
            const memeCard = document.createElement('div');
            memeCard.className = 'meme-card bg-white rounded-xl shadow-lg overflow-hidden';
            memeCard.innerHTML = `
                <img src="${meme.imageUrl}" alt="User Meme" class="w-full h-64 object-cover">
                <div class="p-4">
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">${meme.userName}</span>
                        <div class="flex items-center space-x-2">
                            <button class="like-btn text-red-500 hover:text-red-600 transition-colors" data-meme-id="${memeId}">
                                ‚ù§Ô∏è <span class="text-sm">${meme.likes || 0}</span>
                            </button>
                            <button class="text-blue-500 hover:text-blue-600 transition-colors">
                                üí¨ <span class="text-sm">${meme.comments || 0}</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add like functionality
            const likeBtn = memeCard.querySelector('.like-btn');
            likeBtn.addEventListener('click', () => {
                if (currentUser) {
                    likeMeme(memeId);
                } else {
                    showNotification('Silakan login untuk like meme!', 'error');
                }
            });
            
            return memeCard;
        }

        // Like meme function
        function likeMeme(memeId) {
            const memeRef = db.collection('memes').doc(memeId);
            memeRef.update({
                likes: firebase.firestore.FieldValue.increment(1)
            }).then(() => {
                loadMemes(); // Reload to show updated likes
            });
        }

        // Load memes on page load
        loadMemes();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96dfe8b4f7f640cc',t:'MTc1NTAwMTA0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
